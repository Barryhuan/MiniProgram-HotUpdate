{"version":3,"file":"index.js","mappings":";;;;;;;;;;AAAA;AACA;;;AAIA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AACA;;AAEA;AACA;AACA;AACA;;AAGA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAPA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAPA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAPA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAPA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAPA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAPA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAPA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAPA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAPA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAPA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAPA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAPA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAPA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAPA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAPA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAPA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAPA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAPA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAPA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAPA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAPA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAPA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAPA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAPA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAPA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAPA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAPA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAPA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAPA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AA3UA;;AA8UA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AApBA;;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AAPA;AAUA;AACA;AAAA;AACA;AACA;AACA;AACA;AADA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAdA;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAFA;AAQA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;;AASA;AACA;AADA;AAGA;AA1DA;AA4DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AAPA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AApBA;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AApBA;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AAnpBA;AAupBA;AACA","sources":["webpack://test/./dist/index.js"],"sourcesContent":["function runCode(){\n              // pages/schoolNav/schoolNav.js\r\n\r\n  \n            \n            var Page = function(page){\n              return page\n            }\n          return Page({\n            \n            parseTag(tag) {\n              let res = {\n                  type1: \"tag\",\n                  name: \"\",\n                  voidElement: false,\n                  // attrs: {},\n                  children: [],\n              };\n              let tagMatch = tag.match(/<\\/?([^\\s]+?)[/\\s>]/);\n              if (tagMatch) {\n                  // 标签名称为正则匹配的第2项\n                  res.type1 = tagMatch[1];\n                  if (tag.charAt(tag.length - 2) === \"/\") {\n                      // 判断tag字符串倒数第二项是不是 / 设置为空标签。 例子：<img/>\n                      res.voidElement = true;\n                  }\n              }\n              // 匹配所有的标签正则\n              let classList = tag.match(/\\s([^'\"/\\s><]+?)\\s*?=\\s*?(\".*?\"|'.*?')/g);\n            \n              if (classList) {\n                let style = ''\n                  for (let i = 0; i < classList.length; i++) {\n                      // 去空格再以= 分隔字符串  得到['属性名称','属性值']\n             \n                      let c = classList[i].split(\"=\");\n                      // c[1] = c[1].replace(/\\s*/g, \"\")\n                      c[0] = c[0].replace(/\\s*/g, \"\")\n                      // 循环设置属性\n                      let p = c[1].substring(1, c[1].length - 1)\n                      try{\n                        p = JSON.parse(c[1].substring(1, c[1].length - 1))\n                      }catch(e){\n                       \n                      }\n            \n                      if (c[1]) {\n                        if(c[0] === 'style'){\n                          style += p\n                          res[c[0]] = style\n                        }else{\n                          res[c[0]] = p\n                        }\n                \n                      };\n            \n                  }\n              }\n              return res;\n            },\n            \n            parse(html) {\n              var that = this;\n              let result = [];\n              let current;\n              let level = -1;\n              let arr = [];\n              let tagRE = /<[a-zA-Z\\-\\!\\/](?:\"[^\"]*\"['\"]*|'[^']*'['\"]*|[^'\">])*>/g;\n              html.replace(tagRE, function (tag, index) {\n                  // 判断第二个字符是不是'/'来判断是否open\n                  let isOpen = tag.charAt(1) !== \"/\";\n                  // 获取标签末尾的索引\n                  let start = index + tag.length;\n                  // 标签之前的文本信息\n                  let text = html.slice(start, html.indexOf(\"<\", start));\n            \n                  let parent;\n                  if (isOpen) {\n                      level++;\n                      // 设置标签属性\n                      current = that.parseTag(tag);\n                      // 判断是否为文本信息，是就push一个text children  不等于'  '\n                      if (!current.voidElement && text.trim()) {\n                          current[\"text\"] = text\n                      }\n                      // 如果我们是根用户，则推送新的基本节点\n                      if (level === 0) {\n                          result.push(current);\n                      }\n                      // 判断有没有上层，有就push当前标签\n                      parent = arr[level - 1];\n                      if (parent) {\n                          parent.children.push(current);\n                      }\n                      // console.log(current)\n                      arr[level] = current;\n                  }\n                  // 如果不是开标签，或者是空元素：</div><img>\n                  if (!isOpen || current.voidElement) {\n                      // level--\n                      level--;\n                  }\n              });\n              // console.log(result)\n              return result;\n            \n            },\n          setdata: function setdata(dictData) {\n       \n            this.setData(dictData);\n            var html = `<view class=\"remind-box\" wx:if=\"${typeof this.data.isLoading === \"object\" ? JSON.stringify( this.data.isLoading) : this.data.isLoading}\" style=\"align-items: center; display: flex; flex: 1; flex-direction: column; justify-content: center;\">  <image class=\"remind-img\" src=\"/images/loading.gif\"></image></view><view wx:else>  <view class=\"map_box\" style=\"bottom: 130px; left: 0px; position: absolute; right: 0px; top: 0px;\">    <map style=\"height: 100%; width: 100%;\" id=\"navi_map\" longitude=\"${typeof this.data.userLongitude === \"object\" ? JSON.stringify( this.data.userLongitude) : this.data.userLongitude}\" latitude=\"${typeof this.data.userLatitude === \"object\" ? JSON.stringify( this.data.userLatitude) : this.data.userLatitude}\" scale=\"18\" markers=\"${typeof this.data.markers === \"object\" ? JSON.stringify( this.data.markers) : this.data.markers}\" polyline=\"${typeof this.data.polyline === \"object\" ? JSON.stringify( this.data.polyline) : this.data.polyline}\" bindmarkertap=\"makertap\" show-location subkey=\"JLHBZ-JQELU-I7HVD-B2XSN-5VU3Z-BZFDK\" enable-3D=\"true\" show-compass>      <cover-view class=\"controls ${typeof this.data.fullscreen === \"object\" ? JSON.stringify( this.data.fullscreen) : this.data.fullscreen?\"full\":\"\"}\" style=\"left: 85%; position: relative; top: 70%;\">        <cover-view bindtap=\"jtt\">          <cover-image class=\"img\" src=\"image/staticMap.png\" style=\"height: 80rpx; margin-top: 5px; width: 80rpx;\">        </cover-image></cover-view>        <cover-view bindtap=\"moveSchool\">          <cover-image class=\"img\" src=\"image/moveSchool.png\" style=\"height: 80rpx; margin-top: 5px; width: 80rpx;\">        </cover-image></cover-view>        <cover-view bindtap=\"location\">          <cover-image class=\"img\" src=\"image/location.png\" style=\"height: 80rpx; margin-top: 5px; width: 80rpx;\">        </cover-image></cover-view>      </cover-view>    </map>  </view>  <view class=\"text_box\" style=\"bottom: 0px; height: 130px; left: 0px; position: absolute; right: 0px;\">    <view class=\"text_box_text\" style=\"margin: 15px;\">广东石油化工学院 (邮编：525000)</view>    <view class=\"text_box_text\" style=\"margin: 15px;\">官渡校区：广东省茂名市茂南区官渡二路139号</view>    <view class=\"text_box_text\" style=\"margin: 15px;\">西城校区：茂名市茂南区中科云粤西产业园</view>  </view></view>`\n            this.setData({html : this.parse(html)});\n          },\n            \r\n\r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data: {\r\n    mapHeight: \"800\",\r\n    placeName: \"\",\r\n    hideOrNot: 0,\r\n    activePlaceID: -1,\r\n    markers: [{\r\n      id: 0,\r\n      latitude: 21.677456,\r\n      longitude: 110.924444,\r\n      iconPath: \"image/others.png\",\r\n      width: 23,\r\n      height: 24,\r\n      callout: {\r\n        content: '公交站',\r\n        display: 'ALWAYS'\r\n      }\r\n    }, {\r\n      id: 1,\r\n      latitude: 21.679041,\r\n      longitude: 110.922631,\r\n      iconPath: \"image/sports.png\",\r\n      width: 23,\r\n      height: 24,\r\n      callout: {\r\n        content: '体育馆',\r\n        display: 'ALWAYS'\r\n      }\r\n    }, {\r\n      id: 2,\r\n      latitude: 21.680033,\r\n      longitude: 110.924519,\r\n      iconPath: \"image/sports.png\",\r\n      width: 23,\r\n      height: 24,\r\n      callout: {\r\n        content: '游泳池',\r\n        display: 'ALWAYS'\r\n      }\r\n    }, {\r\n      id: 3,\r\n      latitude: 21.681175,\r\n      longitude: 110.922615,\r\n      iconPath: \"image/sports.png\",\r\n      width: 23,\r\n      height: 24,\r\n      callout: {\r\n        content: '球类体育场',\r\n        display: 'ALWAYS'\r\n      }\r\n    }, {\r\n      id: 4,\r\n      latitude: 21.678962,\r\n      longitude: 110.923371,\r\n      iconPath: \"image/xingzheng.png\",\r\n      width: 23,\r\n      height: 24,\r\n      callout: {\r\n        content: '综合楼',\r\n        display: 'ALWAYS'\r\n      }\r\n    }, {\r\n      id: 5,\r\n      latitude: 21.677855,\r\n      longitude: 110.921939,\r\n      iconPath: \"image/xingzheng.png\",\r\n      width: 23,\r\n      height: 24,\r\n      callout: {\r\n        content: '中专楼',\r\n        display: 'ALWAYS'\r\n      }\r\n    }, {\r\n      id: 6,\r\n      latitude: 21.680981,\r\n      longitude: 110.921472,\r\n      iconPath: \"image/sports.png\",\r\n      width: 23,\r\n      height: 24,\r\n      callout: {\r\n        content: '操场',\r\n        display: 'ALWAYS'\r\n      }\r\n    }, {\r\n      id: 7,\r\n      latitude: 21.677591,\r\n      longitude: 110.922867,\r\n      iconPath: \"image/jiaoxuelou.png\",\r\n      width: 23,\r\n      height: 24,\r\n      callout: {\r\n        content: '一教',\r\n        display: 'ALWAYS'\r\n      }\r\n    }, {\r\n      id: 8,\r\n      latitude: 21.677147,\r\n      longitude: 110.921789,\r\n      iconPath: \"image/jiaoxuelou.png\",\r\n      width: 23,\r\n      height: 24,\r\n      callout: {\r\n        content: '二教A',\r\n        display: 'ALWAYS'\r\n      }\r\n    }, {\r\n      id: 9,\r\n      latitude: 21.677541,\r\n      longitude: 110.921778,\r\n      iconPath: \"image/jiaoxuelou.png\",\r\n      width: 23,\r\n      height: 24,\r\n      callout: {\r\n        content: '二教B',\r\n        display: 'ALWAYS'\r\n      }\r\n    }, {\r\n      id: 10,\r\n      latitude: 21.678897,\r\n      longitude: 110.920882,\r\n      iconPath: \"image/xiaomen.png\",\r\n      width: 23,\r\n      height: 24,\r\n      callout: {\r\n        content: '计算机楼',\r\n        display: 'ALWAYS'\r\n      }\r\n    }, {\r\n      id: 11,\r\n      latitude: 21.679276,\r\n      longitude: 110.920893,\r\n      iconPath: \"image/shitang.png\",\r\n      width: 23,\r\n      height: 24,\r\n      callout: {\r\n        content: '一饭',\r\n        display: 'ALWAYS'\r\n      }\r\n    }, {\r\n      id: 12,\r\n      latitude: 21.682197,\r\n      longitude: 110.922476,\r\n      iconPath: \"image/shitang.png\",\r\n      width: 23,\r\n      height: 24,\r\n      callout: {\r\n        content: '二饭',\r\n        display: 'ALWAYS'\r\n      }\r\n    }, {\r\n      id: 13,\r\n      latitude: 21.679365,\r\n      longitude: 110.920169,\r\n      iconPath: \"image/shitang.png\",\r\n      width: 23,\r\n      height: 24,\r\n      callout: {\r\n        content: '四饭和4D区',\r\n        display: 'ALWAYS'\r\n      }\r\n    }, {\r\n      id: 14,\r\n      latitude: 21.679699,\r\n      longitude: 110.920732,\r\n      iconPath: \"image/shitang.png\",\r\n      width: 23,\r\n      height: 24,\r\n      callout: {\r\n        content: '五饭',\r\n        display: 'ALWAYS'\r\n      }\r\n    }, {\r\n      id: 15,\r\n      latitude: 21.679704,\r\n      longitude: 110.92158,\r\n      iconPath: \"image/sushe.png\",\r\n      width: 23,\r\n      height: 24,\r\n      callout: {\r\n        content: '1区',\r\n        display: 'ALWAYS'\r\n      }\r\n    }, {\r\n      id: 16,\r\n      latitude: 21.678842,\r\n      longitude: 110.920657,\r\n      iconPath: \"image/sushe.png\",\r\n      width: 23,\r\n      height: 24,\r\n      callout: {\r\n        content: '2区',\r\n        display: 'ALWAYS'\r\n      }\r\n    }, {\r\n      id: 17,\r\n      latitude: 21.682227,\r\n      longitude: 110.921794,\r\n      iconPath: \"image/sushe.png\",\r\n      width: 23,\r\n      height: 24,\r\n      callout: {\r\n        content: '3区',\r\n        display: 'ALWAYS'\r\n      }\r\n    }, {\r\n      id: 18,\r\n      latitude: 21.680123,\r\n      longitude: 110.920544,\r\n      iconPath: \"image/sushe.png\",\r\n      width: 23,\r\n      height: 24,\r\n      callout: {\r\n        content: '4区',\r\n        display: 'ALWAYS'\r\n      }\r\n    }, {\r\n      id: 19,\r\n      latitude: 21.676374,\r\n      longitude: 110.92346,\r\n      iconPath: \"image/jiaoxuelou.png\",\r\n      width: 23,\r\n      height: 24,\r\n      callout: {\r\n        content: '实验楼',\r\n        display: 'ALWAYS'\r\n      }\r\n    }, {\r\n      id: 20,\r\n      latitude: 21.678588,\r\n      longitude: 110.924026,\r\n      iconPath: \"image/sushe.png\",\r\n      width: 23,\r\n      height: 24,\r\n      callout: {\r\n        content: '5区',\r\n        display: 'ALWAYS'\r\n      }\r\n    }, {\r\n      id: 21,\r\n      latitude: 21.658237,\r\n      longitude: 110.820106,\r\n      iconPath: \"image/sushe.png\",\r\n      width: 23,\r\n      height: 24,\r\n      callout: {\r\n        content: '北苑B区',\r\n        display: 'ALWAYS'\r\n      }\r\n    }, {\r\n      id: 22,\r\n      latitude: 21.65702,\r\n      longitude: 110.820272,\r\n      iconPath: \"image/sushe.png\",\r\n      width: 23,\r\n      height: 24,\r\n      callout: {\r\n        content: '北苑A区',\r\n        display: 'ALWAYS'\r\n      }\r\n    }, {\r\n      id: 23,\r\n      latitude: 21.655834,\r\n      longitude: 110.823206,\r\n      iconPath: \"image/sports.png\",\r\n      width: 23,\r\n      height: 24,\r\n      callout: {\r\n        content: '体育馆',\r\n        display: 'ALWAYS'\r\n      }\r\n    }, {\r\n      id: 24,\r\n      latitude: 21.656662,\r\n      longitude: 110.819054,\r\n      iconPath: \"image/shitang.png\",\r\n      width: 23,\r\n      height: 24,\r\n      callout: {\r\n        content: '北华饭堂',\r\n        display: 'ALWAYS'\r\n      }\r\n    }, {\r\n      id: 25,\r\n      latitude: 21.65375,\r\n      longitude: 110.821023,\r\n      iconPath: \"image/jiaoxuelou.png\",\r\n      width: 23,\r\n      height: 24,\r\n      callout: {\r\n        content: '艺术楼',\r\n        display: 'ALWAYS'\r\n      }\r\n    }, {\r\n      id: 26,\r\n      latitude: 21.652952,\r\n      longitude: 110.81847,\r\n      iconPath: \"image/jiaoxuelou.png\",\r\n      width: 23,\r\n      height: 24,\r\n      callout: {\r\n        content: '教学综合楼',\r\n        display: 'ALWAYS'\r\n      }\r\n    }, {\r\n      id: 27,\r\n      latitude: 21.653321,\r\n      longitude: 110.815943,\r\n      iconPath: \"image/sushe.png\",\r\n      width: 23,\r\n      height: 24,\r\n      callout: {\r\n        content: '西南区饭堂',\r\n        display: 'ALWAYS'\r\n      }\r\n    }, {\r\n      id: 28,\r\n      latitude: 21.65553,\r\n      longitude: 110.816774,\r\n      iconPath: \"image/jiaoxuelou.png\",\r\n      width: 23,\r\n      height: 24,\r\n      callout: {\r\n        content: '教学楼（看详细地图）',\r\n        display: 'ALWAYS'\r\n      }\r\n    }],\r\n    distance: '',\r\n    cost: '',\r\n    polyline: [],\r\n    userLongitude: 110.922599,\r\n    userLatitude: 21.679529,\r\n    inSchool: false,\r\n    isLoading: true,\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (e) {\r\n    var _this = this;\r\n    wx.showModal({\r\n      title: '选择校区',\r\n      showCancel: true, //是否显示取消按钮\r\n      content: \"请选择校区\",\r\n      cancelText: \"西城校区\", //默认是“取消”\r\n      confirmText: \"官渡校区\", //默认是“确定”\r\n      success: function (res) {\r\n        if (res.cancel) {\r\n          _this.setdata({\r\n            userLongitude: 110.818019,\r\n            userLatitude: 21.654388\r\n          })\r\n        } else {\r\n          _this.setdata({\r\n            userLongitude: 110.922599,\r\n            userLatitude: 21.679529,\r\n          })\r\n        }\r\n      },\r\n      fail: function (res) {}, //接口调用失败的回调函数\r\n      complete: function (res) {}, //接口调用结束的回调函数（调用成功、失败都会执行）\r\n    })\r\n\r\n    // if (e.markerId !== '' && Object.keys(e).length !== 0) {\r\n    //   _this.makertap(e);\r\n    // }\r\n    wx.getLocation({\r\n      type: 'gcj02', // 默认为 wgs84 返回 gps 坐标，gcj02 返回可用于 wx.openLocation 的坐标  \r\n      success: function (res) {\r\n        _this.setdata({\r\n          userLongitude: res.longitude,\r\n          userLatitude: res.latitude\r\n        })\r\n      }\r\n    })\r\n\r\n  },\r\n  onReady: function () { this.setdata({})\r\n    var that = this;\r\n    setTimeout(function () {\r\n      that.setdata({\r\n        isLoading: false\r\n      });\r\n    }, 800);\r\n\r\n  },\r\n  makertap: function (e) {\r\n    console.log(e)\r\n    var id = e.markerId;\r\n    var that = this;\r\n    wx.getLocation({\r\n      type: 'gcj02', // 默认为 wgs84 返回 gps 坐标，gcj02 返回可用于 wx.openLocation 的坐标  \r\n      success: function (res) {\r\n        that.setdata({\r\n          userLongitude: res.longitude,\r\n          userLatitude: res.latitude\r\n        });\r\n        that.setdata({\r\n          activePlaceID: id,\r\n          placeName: that.data.markers[id].callout.content\r\n        })\r\n        var userLocation = that.data.userLongitude + ',' + that.data.userLatitude;\r\n        var destination = that.data.markers[id].longitude + ',' + that.data.markers[id].latitude;\r\n        that.planPolyline(userLocation, destination);\r\n      }\r\n    })\r\n\r\n  },\r\n  planPolyline: function (origin, destination) {\r\n    var that = this;\r\n    var id = that.data.activePlaceID;\r\n    //规划步行路线\r\n    myAmapFun.getWalkingRoute({\r\n      origin: origin,\r\n      destination: destination,\r\n      success: function (data) {\r\n        var points = [];\r\n        if (data.paths && data.paths[0] && data.paths[0].steps) {\r\n          var steps = data.paths[0].steps;\r\n          for (var i = 0; i < steps.length; i++) {\r\n            var poLen = steps[i].polyline.split(';');\r\n            for (var j = 0; j < poLen.length; j++) {\r\n              points.push({\r\n                longitude: parseFloat(poLen[j].split(',')[0]),\r\n                latitude: parseFloat(poLen[j].split(',')[1])\r\n              })\r\n            }\r\n          }\r\n        }\r\n        that.setdata({\r\n          json: data.paths[0],\r\n          polyline: [{\r\n            points: points,\r\n            color: \"#7acfa6\",\r\n            width: 6\r\n          }]\r\n        });\r\n        if (data.paths[0] && data.paths[0].distance) {\r\n          that.setdata({\r\n            distance: data.paths[0].distance + '米'\r\n          });\r\n        }\r\n        if (data.paths[0] && data.paths[0].duration) {\r\n          that.setdata({\r\n            cost: parseInt(data.paths[0].duration / 60) + '分钟'\r\n          });\r\n        }\r\n        var markers = that.data.markers;\r\n        var points = that.data.polyline[0].points;\r\n        //暂时一共70个坐标点\r\n        markers[22] = {\r\n          id: 22,\r\n          latitude: points[0].latitude,\r\n          longitude: points[0].longitude,\r\n          iconPath: '../..image/mapicon_navi_s.png',\r\n          width: 23,\r\n          height: 33\r\n        };\r\n        markers[23] = {\r\n          id: 23,\r\n          latitude: points[points.length - 1].latitude,\r\n          longitude: points[points.length - 1].longitude,\r\n          iconPath: '../..image/mapicon_navi_e.png',\r\n          width: 24,\r\n          height: 34\r\n        }\r\n\r\n        that.setdata({\r\n          markers: markers,\r\n        })\r\n      },\r\n    })\r\n  },\r\n  location: function () {\r\n    var _this = this\r\n    wx.getLocation({\r\n      type: 'gcj02', // 默认为 wgs84 返回 gps 坐标，gcj02 返回可用于 wx.openLocation 的坐标  \r\n      success: function (res) {\r\n        _this.setdata({\r\n          userLongitude: res.longitude,\r\n          userLatitude: res.latitude\r\n        })\r\n      }\r\n    })\r\n  },\r\n  moveSchool: function () {\r\n    //视图返回学校\r\n    var _this = this;\r\n    wx.showModal({\r\n      title: '选择校区',\r\n      showCancel: true, //是否显示取消按钮\r\n      content: \"请选择校区\",\r\n      cancelText: \"西城校区\", //默认是“取消”\r\n      confirmText: \"官渡校区\", //默认是“确定”\r\n      success: function (res) {\r\n        if (res.cancel) {\r\n          _this.setdata({\r\n            userLongitude: 110.818019,\r\n            userLatitude: 21.654388\r\n          })\r\n        } else {\r\n          _this.setdata({\r\n            userLongitude: 110.922599,\r\n            userLatitude: 21.679529,\r\n          })\r\n        }\r\n      },\r\n      fail: function (res) {}, //接口调用失败的回调函数\r\n      complete: function (res) {}, //接口调用结束的回调函数（调用成功、失败都会执行）\r\n    })\r\n\r\n\r\n  },\r\n  jtt: function () {\r\n    wx.showModal({\r\n      title: '选择校区',\r\n      showCancel: true, //是否显示取消按钮\r\n      content: \"请选择校区\",\r\n      cancelText: \"西城校区\", //默认是“取消”\r\n      confirmText: \"官渡校区\", //默认是“确定”\r\n      success: function (res) {\r\n        if (res.cancel) {\r\n          wx.previewImage({\r\n            current: \"cloud://un1-d62c68.756e-un1-d62c68-1258307938/a.png\", // 当前显示图片的http链接\r\n            urls: [\"cloud://un1-d62c68.756e-un1-d62c68-1258307938/a.png\"]// 需要预览的图片http链接列表\r\n          })\r\n        } else {\r\n          wx.previewImage({\r\n            current: \"cloud://un1-d62c68.756e-un1-d62c68-1258307938/b.png\", // 当前显示图片的http链接\r\n            urls: \"cloud://un1-d62c68.756e-un1-d62c68-1258307938/b.png\" // 需要预览的图片http链接列表\r\n          })\r\n        }\r\n      },\r\n      fail: function (res) {}, //接口调用失败的回调函数\r\n      complete: function (res) {}, //接口调用结束的回调函数（调用成功、失败都会执行）\r\n    })\r\n\r\n  },\r\n  goDetail: function () {\r\n    var that = this;\r\n    const latitude = that.data.markers[that.data.activePlaceID].latitude;\r\n    const longitude = that.data.markers[that.data.activePlaceID].longitude;\r\n    const name = that.data.markers[that.data.activePlaceID].callout.content;\r\n    wx.openLocation({\r\n      latitude,\r\n      longitude,\r\n      name,\r\n      address: '广东石油化工学院',\r\n      scale: 8\r\n    })\r\n  }\r\n})\n      \n      \n        }\n            window.exports = runCode;\n        \n            "],"names":[],"sourceRoot":""}